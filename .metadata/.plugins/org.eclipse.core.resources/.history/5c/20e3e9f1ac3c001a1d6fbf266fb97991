package com.shd.server.startup;

import java.util.Collections;
import java.util.HashSet;
import java.util.Set;

import javax.websocket.Endpoint;
import javax.websocket.server.ServerApplicationConfig;
import javax.websocket.server.ServerEndpointConfig;


public class CustomServerAppConfigProvider implements ServerApplicationConfig { 

    @Override
    public Set<ServerEndpointConfig> getEndpointConfigs(Set<Class<? extends Endpoint>> endpointClasses) {
     
        Set<ServerEndpointConfig> result = new HashSet<>();
        
                ServerEndpointConfig sec = ServerEndpointConfig.Builder.create(ProgrammaticEchoEnpoint.class, "/letschat").build();
                ServerEndpointConfig serverEndPt1 = ServerEndpointConfig.Builder.create(ServerEndPt1.class, "/Test2").build();
                result.add(sec);
                result.add(serverEndPt1) ;
        System.out.println("XXXXXXXXXXXX ProgrammaticEchoEnpoint is here") ;   
        return result;
    }

    @Override
    public Set<Class<?>> getAnnotatedEndpointClasses(Set<Class<?>> scanned) {
        return Collections.emptySet();
    }
 public Set<Class<? extends Endpoint>> makeEndpointClasses()
 {
	 Set<Class<? extends Endpoint>> retSet = new HashSet<>();
	 retSet.add( ProgrammaticEchoEnpoint.class) ;
	 getEndpointConfigs(retSet) ;
	 return retSet ;
 }
}
//https://tyrus-project.github.io/documentation/1.13.1/user-guide.html#websocket-programmatic-endpoint
//  Deployment of Annotated Endpoint Using ServerContainer